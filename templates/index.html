<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <title>Gerenciamento de usuários e Filtragem Padrão</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <style>
    /* Paginação */
    .pagination {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }

    .pagination a {
      margin: 0 5px;
      text-decoration: none;
      color: #007bff;
      font-weight: 500;
      /* Adiciona um pouco mais de destaque */
    }

    .pagination a:hover {
      text-decoration: underline;
    }

    .pagination .page-item.disabled .page-link {
      color: #6c757d;
      /* Cor para itens desativados */
      pointer-events: none;
      /* Desativa cliques em itens desativados */
    }
  </style>


</head>

{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
<ul class="flashes">
  {% for category, message in messages %}
  <li class="{{ category }}">{{ message }}</li>
  {% endfor %}
</ul>
{% endif %}
{% endwith %}

<body>
  {% include 'header.html' %}
  <h2>Gerenciamento de usuarios e Obras</h2>
  <div class="filter-container">
    <form method="get" action="/">
      <input id="filterID" name="filterID" type="text" placeholder="Filtrar Por ID" value="{{ filterID }}">
      <input id="filterName" name="filterName" type="text" placeholder="Filtrar por Nome do Funcionário" value="{{ filterName }}">
      <input id="filterCompany" name="filterCompany" type="text" placeholder="Filtrar por Empresa" value="{{ filterCompany }}">
      <input id="filterLocation" name="filterLocation" type="text" placeholder="Filtrar por Obra Localizada" value="{{ filterLocation }}">
      <button type="submit">Filtrar</button>
    </form>
  </div>
  <button id="addNewRecordBtn" class="addNewRecordBtn">Adicionar Novo FUNCIONARIO</button>

  <div id="resultCount" class="resultCount">Resultados encontrados: 0</div>

  <table border="1" id="myTable">
    <thead>
      <tr>
        <th>Selecionar</th>
        <th>ID</th>
        <th>Funcionário</th>
        <th>Empresa</th>
        <th>Obra Localizada</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      {% for record in records %}
      <tr>
        <td><input type="radio" name="selected_record" value="{{ record[0] }}"></td>
        <td>{{ record[0] }}</td>
        <td>{{ record[1] }}</td>
        <td>{{ record[2] }}</td>
        <td>{{ record[3] }}</td>
        <td>
          <form method="POST" action="{{ url_for('delete', id=record[0]) }}" style="display:inline;">
            <button type="submit" class="delete-button">Excluir</button>
          </form>
          <button class="addNewRecordBtn"
            onclick="window.openEditModal('{{ record[0] }}', '{{ record[1] }}', '{{ record[2] }}', '{{ record[3] }}')">Editar</button>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  </div>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
    </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
    integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous">
    </script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous">
    </script>

  {% include "footer.html" %}
</body>

</html>